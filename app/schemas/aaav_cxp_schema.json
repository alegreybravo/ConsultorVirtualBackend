{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "AAAV CxP Output (data_norm)",
  "type": "object",
  "additionalProperties": true,
  "properties": {
    "period": {
      "type": "string",
      "minLength": 1
    },

    "kpi": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "DPO": { "type": ["number", "null"] }
      },
      "required": ["DPO"]
    },

    "aging_overdue": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "overdue_1_30": { "type": "number" },
        "overdue_31_60": { "type": "number" },
        "overdue_61_90": { "type": "number" },
        "overdue_90_plus": { "type": "number" }
      },
      "required": [
        "overdue_1_30",
        "overdue_31_60",
        "overdue_61_90",
        "overdue_90_plus"
      ]
    },

    "aging_current": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "current_0_30": { "type": "number" }
      },
      "required": ["current_0_30"]
    },

    "aging": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "0_30": { "type": "number" },
        "31_60": { "type": "number" },
        "61_90": { "type": "number" },
        "90_plus": { "type": "number" }
      },
      "required": ["0_30", "31_60", "61_90", "90_plus"]
    },

    "total_por_pagar": { "type": "number" },

    "current": { "type": "number" },
    "por_vencer": { "type": "number" },
    "sin_fecha_limite": { "type": "number" },

    "overdue_total": { "type": "number" },
    "open_invoices": {
      "type": "integer",
      "minimum": 0
    },

    "aging_explain": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "ref_date": { "type": ["string", "null"] },

        "aging_overdue": { "type": ["string", "null"] },
        "aging_current": { "type": ["string", "null"] },
        "aging_legacy": { "type": ["string", "null"] },

        "no_vencido": { "type": ["number", "null"] },
        "no_vencido_total": { "type": ["number", "null"] },

        "vencido_1_30": { "type": ["number", "null"] },
        "vencido_31_60": { "type": ["number", "null"] },
        "vencido_61_90": { "type": ["number", "null"] },
        "vencido_90_plus": { "type": ["number", "null"] },

        "overdue_total": { "type": ["number", "null"] },
        "sin_fecha_limite": { "type": ["number", "null"] }
      }
    }
  },

  "required": [
    "period",
    "kpi",
    "aging_overdue",
    "aging_current",
    "aging",
    "total_por_pagar",
    "current",
    "por_vencer",
    "sin_fecha_limite",
    "overdue_total",
    "open_invoices"
  ]
}
